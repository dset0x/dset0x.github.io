<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Getting%20lynx%20to%20print%20URLs%20of%20HTML%20messages%20on%20the%20side - When software gets in the way</title>
<meta charset="utf-8">
<meta name="description" content="Reading%20HTML%20e-mail%20in%20the%20terminal%20can%20be%20a%20bit%20of%20a%20pain.%20%60lynx%60%20does%20a%20fine%20job%20at%20dumping%20them%2C%20but%20actually%20opening%20the%20URLs%20from%20it%20is%20cumbersome%20as%20they%20are%20placed%20at%20the%20very%20end%20of%20the%20message.%20Luckily%2C%20there%27s%20nothing%20a%20little%20bit%20of%20perl%20can%27t%20fix.%20%60~%2F.mutt%2Flink-columns.pl%60%3A%20Then%20put%20the%20following%20entry%20in%20your%20%60~%2F.mailcap%60%3A%20Now%20your%20spammy%20e-mail%20can%20look%20like%20this%20too%21">
<meta name="keywords" content="lynx%2Cmutt%2Cneomutt%2Cterminal%2Clinux">
<meta name="author" content="Dimitrios Semitsoglou-Tsiapos">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
<link rel="alternate" type="application/rss+xml" title="When software gets in the way" href="/feed.xml" />
<style>
    body {font-family: monospace;}
    h1, h2 {font-size:medium; margin: 0.67em 0 0.67em 0;}
    h2 {font-weight: initial;}
    p {width: 79ch;}
    .preview {padding-left: 4ch; opacity: 0.6; width: 79ch;}
</style>
</head>
<body>
<div id="nav">
<a href="/">Home</a> |
GitHub {
    <a href="https://github.com/search?o=desc&q=author:dset0x+&s=committer-date&type=Commits&utf8=✓">Commits</a>,
    <a href="https://github.com/search?o=desc&q=author:dset0x+&s=created&type=Issues&utf8=✓">Issues</a>
}
<hr>
</div>
<h1><a name="section_1">Getting lynx to print URLs of HTML messages on the side</a></h1>

<p>Reading HTML e-mail in the terminal can be a bit of a pain. `lynx` does a fine
job at dumping them, but actually opening the URLs from it is cumbersome as
they are placed at the very end of the message.
</p>
<p>Luckily, there's nothing a little bit of perl can't fix.
</p>
<p>`~/.mutt/link-columns.pl`:
</p><pre>
    #!/usr/bin/env perl

    use strict;
    use warnings;
    use open qw(:std :utf8);

    my @lines;
    my @links;

    while (&lt;STDIN&gt;) {
        chomp($_);
        push @lines, $_;
        if ($_ =~ /^ (?: |([0-9])){3}\. (.*)/) {
            $links[$1] = $2;
        }
    }

    for my $line (@lines) {
        last if ($line eq "References");
        print $line;
        my $first = 1;
        while ($line =~ /\[([0-9]+)\]/g) {
            if ($first == 0) {
                print "\n" . " " x 80;
            } else {
                print " " x (80 - length($line));
                $first = 0;
            }
            printf "[%s] %s", $1, $links[$1]
        }
        printf "\n"
    }
</pre>
<p>Then put the following entry in your `~/.mailcap`:
</p><pre>
    text/html; sh -c "lynx -dump -force_html -assume_charset=utf-8 -display_charset=utf-8 '%s' | uniq | ~/.mutt/link-columns.pl"; copiousoutput; description=HTML Text; nametemplate=%s.html
</pre>
<p>Now your spammy e-mail can look like <a href="/opt/mutt-lynx-urls-on-side.png">this</a> too!</p>
</body>
</html>
