<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Removing binary data from (mpd) logfiles - When software gets in the way</title>
<meta charset="utf-8">
<meta name="description" content="I like to keep `mpd` logs around for statistics purposes. Unfortunately I have had mpd write binary to the logfile for one reason or another. Fear not, easy to fix. We can also remove all the client calls while we&#39;re at it to bring the filesize down from 1GiB.">
<meta name="keywords" content="mpd,linux,logfiles,binary">
<meta name="author" content="Dimitrios Semitsoglou-Tsiapos">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
<link rel="alternate" type="application/rss+xml" title="When software gets in the way" href="/feed.xml" />
<style>
    /* General */
    body        {font-family: sans-serif;}
    a           {text-decoration:none;}

    /* Headings */
    h1, h2      {font-size: medium; margin: 0.67em 0 0.67em 0;}
    h2          {font-weight: initial;}

    /* Paragraphs */
    p, .preview {max-width: 79ch; text-align: justify;}
    .preview    {padding-left: 4ch; opacity: 0.7;}

    /* Menus */
    ul          {padding-left: 0;}
    ul#menu li  {display: inline;}

    /* Decorations */
    ul#menu li:before {content: '［';}
    ul#menu li::after  {content: '］　';}
    ul#menu li:last-child:after  {content: '］';}

    /* Accessibility */

    #skip {
        position: absolute;
        clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
        clip: rect(1px, 1px, 1px, 1px);
    }
</style>
</head>
<body>

<nav>
    <div id="skip"><a href="#content">Skip to content</a></div>
    <ul id="menu">
      <li><a href="/">Home</a></li>
      <li><a href="https://github.com/search?o=desc&q=author:dset0x+&s=created&type=Issues&utf8=✓">GitHub Issues</a></li>
    </ul> 
</nav>

<hr>

<main id="content">
<article>
<h1><a name="section_1">Removing binary data from (mpd) logfiles</a></h1>

<p>I like to keep `mpd` logs around for statistics purposes.
</p>
<p>Unfortunately I have had mpd write binary to the logfile for one reason or
another. Fear not, easy to fix.
</p>
<pre>
    $ rc-service mpd stop
    $ strings -e S /var/lib/mpd/log &gt; /var/lib/mpd/log2
    $ mv /var/lib/mpd/log{2,}
    $ rc-service mpd start
</pre>
<p>We can also remove all the client calls while we're at it to bring the
filesize down from 1GiB.
</p>
<pre>
    $ grep -v ': client: \[' /var/lib/mpd/log &gt; /var/lib/mpd/log2
    $ mv /var/lib/mpd/log{2,}
</pre></article>
</main>
<!--<div style="flex: 1; min-height: 129px; position: relative;"><img src="carrot.png" style="bottom: -13px; position: absolute; right: 0;"/></div>-->
<footer></footer>
</body>
</html>
