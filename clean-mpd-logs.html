<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Removing%20binary%20data%20from%20%28mpd%29%20logfiles - When software gets in the way</title>
<meta charset="utf-8">
<meta name="description" content="I%20like%20to%20keep%20%60mpd%60%20logs%20around%20for%20statistics%20purposes.%20Unfortunately%20I%20have%20had%20mpd%20write%20binary%20to%20the%20logfile%20for%20one%20reason%20or%20another.%20Fear%20not%2C%20easy%20to%20fix.%20We%20can%20also%20remove%20all%20the%20client%20calls%20while%20we%27re%20at%20it%20to%20bring%20the%20filesize%20down%20from%201GiB.">
<meta name="keywords" content="mpd%2Clinux%2Clogfiles%2Cbinary">
<meta name="author" content="Dimitrios Semitsoglou-Tsiapos">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
<link rel="alternate" type="application/rss+xml" title="When software gets in the way" href="/feed.xml" />
<style>
    body {font-family: monospace;}
    h1, h2 {font-size:medium; margin: 0.67em 0 0.67em 0;}
    h2 {font-weight: initial;}
    p {width: 79ch;}
    .preview {padding-left: 4ch; opacity: 0.6; width: 79ch;}
</style>
</head>
<body>
<div id="nav">
<a href="/">Home</a> |
GitHub {
    <a href="https://github.com/search?o=desc&q=author:dset0x+&s=committer-date&type=Commits&utf8=✓">Commits</a>,
    <a href="https://github.com/search?o=desc&q=author:dset0x+&s=created&type=Issues&utf8=✓">Issues</a>
}
<hr>
</div>
<h1><a name="section_1">Removing binary data from (mpd) logfiles</a></h1>

<p>I like to keep `mpd` logs around for statistics purposes.
</p>
<p>Unfortunately I have had mpd write binary to the logfile for one reason or
another. Fear not, easy to fix.
</p>
<pre>
    $ rc-service mpd stop
    $ strings -e S /var/lib/mpd/log &gt; /var/lib/mpd/log2
    $ mv /var/lib/mpd/log{2,}
    $ rc-service mpd start
</pre>
<p>We can also remove all the client calls while we're at it to bring the
filesize down from 1GiB.
</p>
<pre>
    $ grep -v ': client: \[' /var/lib/mpd/log &gt; /var/lib/mpd/log2
    $ mv /var/lib/mpd/log{2,}
</pre></body>
</html>
